"use strict";(self.webpackChunkringcentral_embeddable=self.webpackChunkringcentral_embeddable||[]).push([[214],{614783:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{remoteMiddlewares:function(){return remoteMiddlewares}});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(207698),_core_environment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(969699),_lib_load_script__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(666548),_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(499382);function remoteMiddlewares(ctx,settings,obfuscate){var _a;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.mG)(this,void 0,void 0,(function(){var path,remoteMiddleware,names,scripts,_this=this;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Jh)(this,(function(_b){switch(_b.label){case 0:return(0,_core_environment__WEBPACK_IMPORTED_MODULE_1__.s)()?[2,[]]:(path=(0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__.Kg)(),remoteMiddleware=null!==(_a=settings.enabledMiddleware)&&void 0!==_a?_a:{},names=Object.entries(remoteMiddleware).filter((function(_a){_a[0];return _a[1]})).map((function(_a){return _a[0]})),scripts=names.map((function(name){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.mG)(_this,void 0,void 0,(function(){var nonNamespaced,bundleName,fullPath,error_1;return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Jh)(this,(function(_a){switch(_a.label){case 0:nonNamespaced=name.replace("@segment/",""),bundleName=nonNamespaced,obfuscate&&(bundleName=btoa(nonNamespaced).replace(/=/g,"")),fullPath="".concat(path,"/middleware/").concat(bundleName,"/latest/").concat(bundleName,".js.gz"),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,(0,_lib_load_script__WEBPACK_IMPORTED_MODULE_3__.v)(fullPath)];case 2:return _a.sent(),[2,window["".concat(nonNamespaced,"Middleware")]];case 3:return error_1=_a.sent(),ctx.log("error",error_1),ctx.stats.increment("failed_remote_middleware"),[3,4];case 4:return[2]}}))}))})),[4,Promise.all(scripts)]);case 1:return[2,_b.sent().filter(Boolean)]}}))}))}}}]);