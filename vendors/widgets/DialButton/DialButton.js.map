{"version":3,"sources":["components/DialButton/DialButton.tsx"],"names":["ALTERNATIVE_TIMEOUT","player","DialButton","props","args","state","pressed","timeout","isEdge","window","navigator","userAgent","indexOf","audio","onMouseDown","e","preventDefault","canPlayType","audios","btn","value","volume","muted","src","currentTime","play","onPress","setTimeout","clearTimeout","onOutput","alternativeValue","setState","alternativeTimeout","onMouseUp","onMouseLeave","document","createElement","isSpecial","styles","root","className","btnSvg","btnSvgGroup","circle","btnValue","special","btnText","dx","text","Component","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,mBAAmB,GAAG,IAA5B;AACA,IAAIC,MAAwB,GAAG,IAA/B;;IAmBqBC,U;;;;;AAuBnB,sBAAYC,KAAZ,EAAoD;AAAA;;AAAA;;AAAA,sCAAbC,IAAa;AAAbA,MAAAA,IAAa;AAAA;;AAClD,6CAAMD,KAAN,SAAgBC,IAAhB;AADkD,UAdpDC,KAcoD,GAd3B;AACvBC,MAAAA,OAAO,EAAE;AADc,KAc2B;AAAA,UAVpDC,OAUoD;AAAA,UARpDC,MAQoD,GAPjDC,MAAM,IACLA,MAAM,CAACC,SADR,IAECD,MAAM,CAACC,SAAP,CAAiBC,SAAjB,CAA2BC,OAA3B,CAAmC,MAAnC,IAA6C,CAAC,CAFhD,IAGA,KAIkD;AAAA,UAFpDC,KAEoD;;AAAA,UAQpDC,WARoD,GAQtC,UAACC,CAAD,EAAO;AAAA;;AACnBA,MAAAA,CAAC,CAACC,cAAF;;AAEA,UACEf,MAAM,IACNA,MAAM,CAACgB,WAAP,CAAmB,WAAnB,MAAoC,EADpC,IAEAC,sCAAO,MAAKf,KAAL,CAAWgB,GAAlB,oDAAO,gBAAgBC,KAAvB,CAHF,EAIE;AACAnB,QAAAA,MAAM,CAACoB,MAAP,GAAgB,MAAKlB,KAAL,CAAWkB,MAA3B;AACApB,QAAAA,MAAM,CAACqB,KAAP,GAAe,MAAKnB,KAAL,CAAWmB,KAA1B;AACArB,QAAAA,MAAM,CAACsB,GAAP,GAAaL,mBAAO,MAAKf,KAAL,CAAWgB,GAAX,CAAeC,KAAtB,CAAb;AACAnB,QAAAA,MAAM,CAACuB,WAAP,GAAqB,CAArB;AACAvB,QAAAA,MAAM,CAACwB,IAAP;AACD;;AACD,UAAI,OAAO,MAAKtB,KAAL,CAAWuB,OAAlB,KAA8B,UAAlC,EAA8C;AAC5C,cAAKvB,KAAL,CAAWuB,OAAX,CAAmB,MAAKvB,KAAL,CAAWgB,GAAX,CAAeC,KAAlC;AACD;;AAED,YAAKb,OAAL,GAAeoB,UAAU,CAAC,YAAM;AAC9B,YAAI,MAAKtB,KAAL,CAAWC,OAAf,EAAwB;AACtB,cAAI,MAAKC,OAAT,EAAkB;AAChBqB,YAAAA,YAAY,CAAC,MAAKrB,OAAN,CAAZ;AACA,kBAAKA,OAAL,GAAe,IAAf;AACD;;AACD,cAAI,OAAO,MAAKJ,KAAL,CAAW0B,QAAlB,KAA+B,UAAnC,EAA+C;AAC7C,kBAAK1B,KAAL,CAAW0B,QAAX,CACE,MAAK1B,KAAL,CAAWgB,GAAX,CAAeW,gBAAf,IAAmC,MAAK3B,KAAL,CAAWgB,GAAX,CAAeC,KADpD;AAGD;;AACD,gBAAKW,QAAL,CAAc;AACZzB,YAAAA,OAAO,EAAE;AADG,WAAd;AAGD;AACF,OAfwB,EAetB,MAAKH,KAAL,CAAW6B,kBAAX,IAAiChC,mBAfX,CAAzB;;AAiBA,YAAK+B,QAAL,CAAc;AACZzB,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD,KA9CmD;;AAAA,UAgDpD2B,SAhDoD,GAgDxC,YAAM;AAChB,UAAI,MAAK5B,KAAL,CAAWC,OAAf,EAAwB;AACtB,YAAI,MAAKC,OAAT,EAAkB;AAChBqB,UAAAA,YAAY,CAAC,MAAKrB,OAAN,CAAZ;AACA,gBAAKA,OAAL,GAAe,IAAf;AACD;;AACD,YAAI,OAAO,MAAKJ,KAAL,CAAW0B,QAAlB,KAA+B,UAAnC,EAA+C;AAC7C,gBAAK1B,KAAL,CAAW0B,QAAX,CAAoB,MAAK1B,KAAL,CAAWgB,GAAX,CAAeC,KAAnC;AACD;;AACD,cAAKW,QAAL,CAAc;AACZzB,UAAAA,OAAO,EAAE;AADG,SAAd;AAGD;AACF,KA7DmD;;AAAA,UA+DpD4B,YA/DoD,GA+DrC,YAAM;AACnB,UAAI,MAAK7B,KAAL,CAAWC,OAAf,EAAwB;AACtB,YAAI,MAAKC,OAAT,EAAkB;AAChBqB,UAAAA,YAAY,CAAC,MAAKrB,OAAN,CAAZ;AACA,gBAAKA,OAAL,GAAe,IAAf;AACD;;AACD,cAAKwB,QAAL,CAAc;AACZzB,UAAAA,OAAO,EAAE;AADG,SAAd;AAGD;AACF,KAzEmD;;AAGlD,QAAI,OAAO6B,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,CAACC,aAA5C,IAA6D,CAACnC,MAAlE,EAA0E;AACxEA,MAAAA,MAAM,GAAGkC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAT;AACD;;AALiD;AAMnD;;;;6BAqEQ;AACP,UAAMC,SAAS,GAAG,KAAKlC,KAAL,CAAWgB,GAAX,CAAeC,KAAf,KAAyB,GAA3C;AACA,0BACE;AACE,yCAAwB,KAAKjB,KAAL,CAAWgB,GAAX,CAAeC,KAAvC,CADF;AAEE,QAAA,SAAS,EAAE,4BAAWkB,mBAAOC,IAAlB,EAAwB,KAAKpC,KAAL,CAAWqC,SAAnC;AAFb,sBAIE;AAAK,QAAA,SAAS,EAAEF,mBAAOG,MAAvB;AAA+B,QAAA,OAAO,EAAC;AAAvC,sBACE;AACE,QAAA,SAAS,EAAE,4BACTH,mBAAOI,WADE,EAET,KAAKrC,KAAL,CAAWC,OAAX,IAAsBgC,mBAAOhC,OAFpB,CADb;AAKE,QAAA,SAAS,EAAE,KAAK2B,SALlB;AAME,QAAA,WAAW,EAAE,KAAKnB,WANpB;AAOE,QAAA,YAAY,EAAE,KAAKoB;AAPrB,sBASE;AAAQ,QAAA,SAAS,EAAEI,mBAAOK,MAA1B;AAAkC,QAAA,EAAE,EAAC,KAArC;AAA2C,QAAA,EAAE,EAAC,KAA9C;AAAoD,QAAA,CAAC,EAAC;AAAtD,QATF,eAUE;AACE,QAAA,SAAS,EAAE,4BACTL,mBAAOM,QADE,EAETP,SAAS,GAAGC,mBAAOO,OAAV,GAAoB,IAFpB,CADb;AAKE,QAAA,CAAC,EAAC,GALJ;AAME,QAAA,EAAE,EAAC,KANL;AAOE,QAAA,CAAC,EAAC,GAPJ;AAQE,QAAA,EAAE,EAAER,SAAS,GAAG,GAAH,GAAS;AARxB,SAUG,KAAKlC,KAAL,CAAWgB,GAAX,CAAeC,KAVlB,CAVF,eAsBE;AACE,QAAA,SAAS,EAAEkB,mBAAOQ,OADpB;AAEE,QAAA,CAAC,EAAC,GAFJ;AAGE,QAAA,EAAE,EAAE,KAAK3C,KAAL,CAAWgB,GAAX,CAAe4B,EAHrB;AAIE,QAAA,CAAC,EAAC,GAJJ;AAKE,QAAA,EAAE,EAAC;AALL,SAOG,KAAK5C,KAAL,CAAWgB,GAAX,CAAe6B,IAPlB,CAtBF,CADF,CAJF,CADF;AAyCD;;;;EA7IqCC,gB;;;AAAnB/C,U,CAIZgD,Y,GAAyC;AAC9C7B,EAAAA,MAAM,EAAE,CADsC;AAE9CC,EAAAA,KAAK,EAAE;AAFuC,C","sourcesContent":["import classnames from 'classnames';\nimport React, { Component } from 'react';\nimport audios from './audios';\nimport styles from './styles.scss';\n\nconst ALTERNATIVE_TIMEOUT = 1000;\nlet player: HTMLAudioElement = null;\n\ninterface DialButtonProps {\n  btn: {\n    value: string;\n    text?: string;\n    alternativeValue?: string;\n    dx?: string;\n  };\n  className?: string;\n  onPress?: (...args: any[]) => any;\n  onOutput?: (...args: any[]) => any;\n  alternativeTimeout?: number;\n  volume?: number;\n  muted?: boolean;\n}\ninterface DialButtonState {\n  pressed: boolean;\n}\nexport default class DialButton extends Component<\n  DialButtonProps,\n  DialButtonState\n> {\n  static defaultProps: Partial<DialButtonProps> = {\n    volume: 1,\n    muted: false,\n  };\n\n  state: DialButtonState = {\n    pressed: false,\n  };\n\n  timeout: NodeJS.Timeout;\n\n  isEdge =\n    (window &&\n      window.navigator &&\n      window.navigator.userAgent.indexOf('Edge') > -1) ||\n    false;\n\n  audio: HTMLAudioElement;\n\n  constructor(props: DialButtonProps, ...args: any[]) {\n    super(props, ...args);\n\n    if (typeof document !== 'undefined' && document.createElement && !player) {\n      player = document.createElement('audio');\n    }\n  }\n\n  onMouseDown = (e) => {\n    e.preventDefault();\n\n    if (\n      player &&\n      player.canPlayType('audio/ogg') !== '' &&\n      audios[this.props.btn?.value]\n    ) {\n      player.volume = this.props.volume;\n      player.muted = this.props.muted;\n      player.src = audios[this.props.btn.value];\n      player.currentTime = 0;\n      player.play();\n    }\n    if (typeof this.props.onPress === 'function') {\n      this.props.onPress(this.props.btn.value);\n    }\n\n    this.timeout = setTimeout(() => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        if (typeof this.props.onOutput === 'function') {\n          this.props.onOutput(\n            this.props.btn.alternativeValue || this.props.btn.value,\n          );\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    }, this.props.alternativeTimeout || ALTERNATIVE_TIMEOUT);\n\n    this.setState({\n      pressed: true,\n    });\n  };\n\n  onMouseUp = () => {\n    if (this.state.pressed) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      if (typeof this.props.onOutput === 'function') {\n        this.props.onOutput(this.props.btn.value);\n      }\n      this.setState({\n        pressed: false,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (this.state.pressed) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      this.setState({\n        pressed: false,\n      });\n    }\n  };\n\n  render() {\n    const isSpecial = this.props.btn.value === '*';\n    return (\n      <div\n        data-sign={`dialPadBtn${this.props.btn.value}`}\n        className={classnames(styles.root, this.props.className)}\n      >\n        <svg className={styles.btnSvg} viewBox=\"0 0 500 500\">\n          <g\n            className={classnames(\n              styles.btnSvgGroup,\n              this.state.pressed && styles.pressed,\n            )}\n            onMouseUp={this.onMouseUp}\n            onMouseDown={this.onMouseDown}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <circle className={styles.circle} cx=\"250\" cy=\"250\" r=\"191\" />\n            <text\n              className={classnames(\n                styles.btnValue,\n                isSpecial ? styles.special : null,\n              )}\n              x=\"0\"\n              dx=\"205\"\n              y=\"0\"\n              dy={isSpecial ? 350 : 250}\n            >\n              {this.props.btn.value}\n            </text>\n            <text\n              className={styles.btnText}\n              x=\"0\"\n              dx={this.props.btn.dx}\n              y=\"0\"\n              dy=\"360\"\n            >\n              {this.props.btn.text}\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n"],"file":"DialButton.js"}